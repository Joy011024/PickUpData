@using AppLanguage;
@using HRApp.Web;
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>系统配置</title>
    <link href="~/Scripts/bootstrap-select/bootstrap.min.css?v=@InitAppSetting.Version" rel="stylesheet" />
    <link href="~/Scripts/bootstrap-select/bootstrap-select.css?v=@InitAppSetting.Version" rel="stylesheet" />
    <link href="~/Content/AppLayout.css?v=@InitAppSetting.Version" rel="stylesheet" />
    @*<script src="~/Scripts/jquery-1.7.2.js?v=@InitAppSetting.Version"></script>*@
    <script src="~/Scripts/jquery-1.9.1.js?v=@InitAppSetting.Version"></script>
    <link href="~/Scripts/jquery.combo.select.js/combo.select.css?v=@InitAppSetting.Version" rel="stylesheet" />
    <script src="~/Scripts/jquery.combo.select.js/jquery.combo.select.js?v=@InitAppSetting.Version"></script>
    <script src="~/Scripts/layer3.0/layer.js?v=@InitAppSetting.Version"></script>
    <script src="~/Scripts/Common/Common.js?v=@InitAppSetting.Version"></script>
    <link href="~/Content/HtmlEle.css?v=@InitAppSetting.Version" rel="stylesheet" />
    <script src="~/Scripts/Common/HtmlEleExt.js?v=@InitAppSetting.Version"></script>
    <script src="~/Scripts/bootstrap-select/bootstrap.min.js?v=@InitAppSetting.Version"></script>
    <script src="~/Scripts/bootstrap-select/bootstrap-select.js?v=@InitAppSetting.Version"></script>
    <style type="text/css">
        
    </style>
    <script type="text/javascript">
        $(function () {
            bindPostAjax('/AppSettingManage/QueryRootAppSetting', {}, function (response, statue) {
                var data = [
                    {
                        id:'-1',text:'请选择',parentId:'-1',parentCode:'-1'
                    }
                ]
                if (response.Success) {

                }
                console.log(response);
               // $('select').comboSelect({ maxHeight: 100, width: 100, data: data });//该插件存在数据选择缺陷
            });
            $('#btnSave').on('click', function () {
                var root = $(".ApiParam");
                var valid= ValidEleIsRequired(root, '.required')
                if (!valid) {
                    return;
                }
                var data= $('[apiKey=ParentCode]').getSelected();
                var api = GetXPathObject(root, "apiKey");
                if (data) {
                    api["ParentId"] = $(data).attr('ParentId');
                }
                if (!api["ParentId"])
                {
                 api["ParentId"] = -1;
                }
                bindPostAjax('/AppSettingManage/SaveAppSetting', api, function (response, statue) {
                    AjaxWarming($('#btnSave'), response);
                    console.log(response);
                });
            });
            $('.bindSelect>input').focus(function (e, ele) {
                var slt = $(this).siblings();
                if (slt.first('select').length < 1) {
                    slt = slt.find('select');
                }
                else {
                    slt = slt.first('select');
                }
                $(slt).show();
                console.log('click');
            }).blur(function (e, ele) {
                var slt = $(this).siblings();
                if (slt.first('select').length < 1) {
                    slt = slt.find('select');
                }
                else {
                    slt = slt.first('select');
                }
                $(slt).hide();
                console.log('leave');
            });
          
            $('select').comboSelect({ maxHeight: 100, width: 100});//该插件存在数据选择缺陷
        });
        
        
    </script>
</head>
<body>
    <div class="ApiParam">
        <div class="alongLine">
            <span style="width:100px;">@Lang.LblName :</span>
            <span>
                <input type="text" id="txtName" apiKey="Name" autocomplete="off" class="required" /> @* autocomplete关闭自动记忆功能*@ @*apiKey 调用接口中匹配json的对象属性*@
                
            </span>
        </div>
        <div class="alongLine">
            <span style="width:100px;">@Lang.LblParentCode :</span>
            <span class="jq22" style="display: inline-table;">
                <select apikey="ParentCode" >
                    <option value="">@AppLanguage.Lang.Tip_PleaseSelectParentNode</option>
                    @{
                        foreach (HRApp.Model.CategoryItems item in ViewData["ParentNode"] as List<HRApp.Model.CategoryItems>)
                        {
                            <option appvalue="@item.ItemValue" value="@item.Code" parentid="@item.Id" nodeParentId="@item.ParentId">@item.Name</option>
                        }

                    }
                </select>
            </span>
        </div>

        <div class="alongLine">
            <span style="width:100px;">@Lang.LblCode :</span>
            <span>
                <input type="text" id="txtMemnorideCode" apikey="Code" class="required" autocomplete="off" />
            </span>
        </div>
        <div class="alongLine">
            <span style="width:100px;">@Lang.LblAppSetValue :</span>
            <span>
                <input type="text" id="txtDescription" class="required" apikey="Value" />
            </span>
        </div>
        <div class="alongLine">
            <span style="width:100px;">@Lang.LblDescription :</span>
            <span>
                <textarea id="txtDescription" apikey="Desc"></textarea>
            </span>
        </div>
    </div>
    <div>
        <button id="btnSave" class="button">@Lang.BtnSave</button>
    </div>
</body>
</html>
